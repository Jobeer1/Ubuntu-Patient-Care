# Default values for mcp-credentials Helm chart

namespace:
  create: true
  name: mcp-credentials

# Global configuration
global:
  environment: production
  logLevel: INFO
  deploymentType: kubernetes

# MCP Server configuration
mcp_server:
  enabled: true
  replicaCount: 2
  
  image:
    repository: mcp-server
    tag: latest
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8000
    metricsPort: 8001
  
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  healthChecks:
    enabled: true
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
    readiness:
      initialDelaySeconds: 15
      periodSeconds: 5

# Kiro Agent configuration
kiro_agent:
  enabled: true
  replicaCount: 2
  
  image:
    repository: kiro-agent
    tag: latest
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8001
    metricsPort: 8002
  
  resources:
    requests:
      cpu: 400m
      memory: 512Mi
    limits:
      cpu: 1500m
      memory: 2Gi
  
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 8
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# PostgreSQL configuration
postgresql:
  enabled: true
  auth:
    username: credentials_user
    password: "change-me-in-production"
    existingSecret: "postgres-credentials"
  
  primary:
    persistence:
      enabled: true
      size: 20Gi
      storageClassName: standard
  
  metrics:
    enabled: true

# Redis configuration
redis:
  enabled: true
  auth:
    enabled: true
    password: "change-me-in-production"
    existingSecret: "redis-credentials"
  
  master:
    persistence:
      enabled: true
      size: 5Gi
  
  replica:
    replicaCount: 0  # Disable replicas in basic setup
  
  metrics:
    enabled: true

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    kubernetes.io/ingress.class: "nginx"
  
  hosts:
    - host: api.credentials.example.com
      paths:
        - path: /
          pathType: Prefix
  
  tls:
    - secretName: tls-credentials
      hosts:
        - credentials.example.com
        - api.credentials.example.com

# Security configuration
security:
  securityContext:
    runAsNonRoot: true
    fsGroup: 1000
    capabilities:
      drop:
        - ALL
  
  networkPolicies:
    enabled: true
  
  podSecurityPolicy:
    enabled: false  # Enable if your cluster supports it

# RBAC configuration
rbac:
  create: true
  serviceAccountCreate: true

# Resource quotas
resourceQuota:
  enabled: true
  cpu: "10"
  memory: "20Gi"

# Monitoring and logging
monitoring:
  prometheus:
    enabled: true
    interval: 30s
  
  grafana:
    enabled: false
    dashboardConfigMap: "mcp-credentials-dashboard"
  
  logging:
    enabled: true
    level: INFO

# Backup configuration
backup:
  enabled: false
  schedule: "0 2 * * *"  # Daily at 2 AM
  retention: 30  # days

# Advanced features
features:
  enableMetrics: true
  enableTracing: true
  enableProfiling: false

# Development overrides
dev:
  enabled: false
  debugLogging: false
  skipSecurityChecks: false

# External adapter integrations
adapters:
  mri:
    enabled: true
    endpoint: "mri-system.medical-network"
    timeout: 30
  
  lab:
    enabled: true
    endpoint: "lis-system.medical-network"
    timeout: 30
  
  ct:
    enabled: true
    endpoint: "ct-system.medical-network"
    timeout: 30
