<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA Medical Reporting - Professional Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/static/css/sa-dashboard.css" rel="stylesheet">
    <style>
        :root {
            --sa-green: #007A4D;
            --sa-gold: #FFB612;
            --sa-red: #DE3831;
            --sa-blue: #002395;
            --sa-black: #000000;
            --sa-white: #FFFFFF;
        }
        
        body {
            background: linear-gradient(135deg, var(--sa-green) 0%, var(--sa-blue) 50%, var(--sa-gold) 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .sa-compact-header {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 0.75rem 0;
            border-bottom: 3px solid var(--sa-gold);
        }
        
        .sa-main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            margin: 1rem;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .sa-action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .sa-action-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 0.75rem;
            padding: 1.25rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .sa-action-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }
        
        .sa-action-card.new-report {
            border-left: 4px solid var(--sa-green);
        }
        
        .sa-action-card.new-report:hover {
            border-color: var(--sa-green);
            background: linear-gradient(145deg, #ffffff 0%, rgba(0, 122, 77, 0.05) 100%);
        }
        
        .sa-action-card.find-studies {
            border-left: 4px solid var(--sa-blue);
        }
        
        .sa-action-card.find-studies:hover {
            border-color: var(--sa-blue);
            background: linear-gradient(145deg, #ffffff 0%, rgba(0, 35, 149, 0.05) 100%);
        }
        
        .sa-action-card.voice-dictation {
            border-left: 4px solid var(--sa-gold);
        }
        
        .sa-action-card.voice-dictation:hover {
            border-color: var(--sa-gold);
            background: linear-gradient(145deg, #ffffff 0%, rgba(255, 182, 18, 0.05) 100%);
        }
        
        .sa-action-card.templates {
            border-left: 4px solid var(--sa-red);
        }
        
        .sa-action-card.templates:hover {
            border-color: var(--sa-red);
            background: linear-gradient(145deg, #ffffff 0%, rgba(222, 56, 49, 0.05) 100%);
        }
        
        .sa-status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .sa-status-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 0.75rem;
            padding: 1.25rem;
            border-top: 4px solid var(--sa-gold);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .sa-flag-accent {
            background: linear-gradient(90deg, var(--sa-green) 0%, var(--sa-gold) 25%, var(--sa-red) 50%, var(--sa-blue) 75%, var(--sa-black) 100%);
            height: 4px;
            width: 100%;
            margin-bottom: 1rem;
            border-radius: 2px;
        }
        
        .sa-compact-footer {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 0 1rem 1rem;
        }
    </style>
</head>
<body>
    <!-- Compact Header -->
    <header class="sa-compact-header text-white">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-stethoscope text-xl mr-2 text-yellow-400"></i>
                    <span class="text-lg font-bold">SA Medical Reporting ðŸ‡¿ðŸ‡¦</span>
                </div>
                <div class="text-right text-sm">
                    <div class="font-semibold">Goeie dag, {{ doctor_name or 'Dr. [Name]' }}</div>
                    <div class="opacity-90" id="current-date">
                        <script>
                            // Display current date in Afrikaans format
                            const now = new Date();
                            const days = ['Sondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrydag', 'Saterdag'];
                            const months = ['Januarie', 'Februarie', 'Maart', 'April', 'Mei', 'Junie', 'Julie', 'Augustus', 'September', 'Oktober', 'November', 'Desember'];
                            
                            const dayName = days[now.getDay()];
                            const day = now.getDate();
                            const monthName = months[now.getMonth()];
                            const year = now.getFullYear();
                            
                            document.getElementById('current-date').textContent = `${dayName}, ${day} ${monthName} ${year}`;
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <div class="sa-main-content">
        <!-- SA Flag Accent -->
        <div class="sa-flag-accent"></div>
        
        <!-- System Status Alert -->
        <div class="bg-green-50 border-l-4 border-green-400 text-green-700 px-3 py-2 rounded mb-4">
            <div class="flex items-center">
                <i class="fas fa-check-circle mr-2"></i>
                <div class="text-sm">
                    <span class="font-semibold">âœ… All Systems Operational</span> â€¢ 
                    POPIA Compliant â€¢ HPCSA Standards Applied
                </div>
            </div>
        </div>

        <!-- Quick Actions Grid -->
        <section class="mb-6">
            <h2 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                <i class="fas fa-bolt text-yellow-500 mr-2"></i>
                Quick Actions
            </h2>
            <div class="sa-action-grid">
                <a href="/new-report" class="sa-action-card new-report">
                    <i class="fas fa-plus-circle text-2xl mb-2" style="color: var(--sa-green);"></i>
                    <h3 class="font-semibold mb-1">New Report</h3>
                    <p class="text-xs text-gray-600">Create medical report with AI voice</p>
                </a>
                
                <a href="/find-studies" class="sa-action-card find-studies">
                    <i class="fas fa-search text-2xl mb-2" style="color: var(--sa-blue);"></i>
                    <h3 class="font-semibold mb-1">Find Studies</h3>
                    <p class="text-xs text-gray-600">Search PACS and DICOM images</p>
                </a>
                
                <a href="/voice-demo" class="sa-action-card voice-dictation">
                    <i class="fas fa-microphone text-2xl mb-2" style="color: var(--sa-gold);"></i>
                    <h3 class="font-semibold mb-1">Voice Dictation</h3>
                    <p class="text-xs text-gray-600">SA English voice reporting</p>
                </a>
                
                <a href="/templates" class="sa-action-card templates">
                    <i class="fas fa-file-alt text-2xl mb-2" style="color: var(--sa-red);"></i>
                    <h3 class="font-semibold mb-1">SA Templates</h3>
                    <p class="text-xs text-gray-600">HPCSA-compliant templates</p>
                </a>
            </div>
        </section>

        <!-- Dashboard Status Grid -->
        <div class="sa-status-grid">
            <!-- System Status -->
            <div class="sa-status-card">
                <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                    <i class="fas fa-chart-bar mr-2" style="color: var(--sa-blue);"></i>
                    System Status
                </h3>
                <div class="space-y-2 text-sm">
                    {% if services %}
                        {% for service_name, status in services.items() %}
                        <div class="flex justify-between items-center">
                            <span>{{ service_name.replace('_', ' ').title() }}</span>
                            <span class="{% if status == 'online' or status == 'ready' %}bg-green-100 text-green-800{% else %}bg-yellow-100 text-yellow-800{% endif %} px-2 py-1 rounded text-xs">
                                <i class="fas fa-{% if status == 'online' or status == 'ready' %}check-circle{% else %}exclamation-triangle{% endif %} mr-1"></i>{{ status.title() }}
                            </span>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="flex justify-between items-center">
                            <span>Voice Engine</span>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">
                                <i class="fas fa-check-circle mr-1"></i>Ready
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>DICOM Service</span>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">
                                <i class="fas fa-check-circle mr-1"></i>Connected
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Orthanc PACS</span>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">
                                <i class="fas fa-check-circle mr-1"></i>Online
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>NAS Storage</span>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">
                                <i class="fas fa-check-circle mr-1"></i>Mounted
                            </span>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Today's Activity -->
            <div class="sa-status-card">
                <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                    <i class="fas fa-chart-line mr-2" style="color: var(--sa-green);"></i>
                    Today's Activity
                </h3>
                <div class="grid grid-cols-2 gap-3 text-sm">
                    <div class="text-center">
                        <div class="text-xl font-bold" style="color: var(--sa-green);">0</div>
                        <div class="text-xs text-gray-600">Reports</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl font-bold" style="color: var(--sa-blue);">0</div>
                        <div class="text-xs text-gray-600">Voice Sessions</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl font-bold" style="color: var(--sa-gold);">0</div>
                        <div class="text-xs text-gray-600">Studies</div>
                    </div>
                    <div class="text-center">
                        <div class="text-xl font-bold" style="color: var(--sa-red);">0</div>
                        <div class="text-xs text-gray-600">Patients</div>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="sa-status-card">
                <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                    <i class="fas fa-link mr-2" style="color: var(--sa-gold);"></i>
                    Quick Links
                </h3>
                <div class="space-y-2 text-sm">
                    <a href="/dicom-viewer" class="block text-blue-600 hover:text-blue-800">
                        <i class="fas fa-eye mr-2"></i>DICOM Viewer
                    </a>
                    <a href="/patients" class="block text-blue-600 hover:text-blue-800">
                        <i class="fas fa-users mr-2"></i>Patient Management
                    </a>
                    <a href="/voice-reporting" class="block text-blue-600 hover:text-blue-800">
                        <i class="fas fa-microphone-alt mr-2"></i>Voice Reporting
                    </a>
                    <a href="/health" class="block text-blue-600 hover:text-blue-800">
                        <i class="fas fa-heartbeat mr-2"></i>System Health
                    </a>
                </div>
            </div>

            <!-- SA Medical Info -->
            <div class="sa-status-card">
                <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                    <i class="fas fa-flag mr-2" style="color: var(--sa-green);"></i>
                    SA Medical Standards
                </h3>
                <div class="space-y-2 text-xs text-gray-600">
                    <div class="flex items-center">
                        <i class="fas fa-shield-alt mr-2 text-green-600"></i>
                        POPIA Compliant Data Handling
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-certificate mr-2 text-blue-600"></i>
                        HPCSA Standards Applied
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-language mr-2 text-yellow-600"></i>
                        SA English Medical Terms
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-id-card mr-2 text-red-600"></i>
                        SA ID Number Validation
                    </div>
                </div>
            </div>
        </div>

        <!-- Compact Footer -->
        <div class="sa-compact-footer">
            <div class="text-xs">
                Â© 2024 SA Medical Reporting Module â€¢ HPCSA Compliant â€¢ POPIA Secure â€¢ Version 1.0.0
            </div>
        </div>
    </div>

    <script>
        console.log('ðŸ‡¿ðŸ‡¦ SA Medical Dashboard loaded successfully');
        
        // Add click handlers for action cards
        document.querySelectorAll('.sa-action-card').forEach(card => {
            card.addEventListener('click', function(e) {
                e.preventDefault();
                const href = this.getAttribute('href');
                if (href) {
                    window.location.href = href;
                }
            });
        });
    </script>
</body>
</html>